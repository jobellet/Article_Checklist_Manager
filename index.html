<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Article Checklist Manager</title>
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="hero">
      <div class="hero__copy">
        <p class="eyebrow">Article Checklist Manager</p>
        <h1>Simple journal-fit assistant</h1>
        <p class="lede">
          Use the graphical interface to upload your manuscript and figures, pick the target journal, and see exactly what must
          change to meet the submission guidelines.
        </p>
        <div class="actions">
          <label class="file-button">
            <input id="manuscript-upload" type="file" accept=".docx,.txt,.md,.markdown" />
            <span>Upload manuscript (.docx, .txt, .md)</span>
          </label>
          <label class="file-button">
            <input id="figure-upload" type="file" accept="image/*,.pdf" multiple />
            <span>Upload figures</span>
          </label>
        </div>
        <div class="upload-status">
          <p class="label">Uploads</p>
          <div class="grid grid--two">
            <div class="info-card">
              <p class="muted">Manuscript</p>
              <p id="manuscript-status">No manuscript uploaded yet.</p>
            </div>
            <div class="info-card">
              <p class="muted">Figures</p>
              <p id="figure-status">Figures optional; no uploads yet.</p>
            </div>
          </div>
        </div>
      </div>
        <div class="summary">
          <p class="label">Manuscript snapshot</p>
          <div id="analysis-summary" class="info-card">
            <p class="muted">Upload a supported manuscript file to extract sections and word counts.</p>
          </div>
        </div>
      </header>

    <main class="layout">
      <section class="panel">
        <div class="panel__header">
          <h2>Journal selection</h2>
          <button id="export-markdown" class="secondary">Export checklist as Markdown</button>
        </div>
        <p class="muted">
          Type a keyword to narrow down the list, pick a journal option, and we will list the changes needed to fit its
          guidelines.
        </p>
        <div class="grid grid--three align-end">
          <label class="stack" for="journal-filter">
            <span class="label">Filter journals</span>
            <input id="journal-filter" type="text" placeholder="Start typing to filter" />
          </label>
          <label class="stack" for="journal-select">
            <span class="label">Journal</span>
            <select id="journal-select"></select>
          </label>
          <div id="journal-summary" class="journal-summary info-card muted">
            <p>No journal selected yet.</p>
          </div>
        </div>
        <div id="change-results" class="stack muted">
          <p>Upload a manuscript and select a journal to see required changes.</p>
        </div>
      </section>

      <section class="panel">
        <div class="panel__header">
          <div class="stack">
            <p class="label">TaskStore wiring</p>
            <h2>Today view & planner preview</h2>
          </div>
          <div class="task-toolbar">
            <button id="seed-routines" class="secondary">Sync sample routine</button>
            <button id="delete-routines" class="secondary">Remove routine</button>
            <button id="add-habit" class="secondary">Ingest habit</button>
            <button id="export-tasks" class="secondary">Export data</button>
            <label for="import-tasks" class="button secondary">Import data</label>
            <input id="import-tasks" type="file" accept="application/json" hidden />
            <button id="reset-task-data" class="secondary">Reset local data</button>
          </div>
        </div>
        <p id="taskstore-status" class="taskstore-status" role="status"></p>
        <p class="muted">
          A lightweight wiring of the new TaskStore layer. Routine steps, habit completions, and manual tasks appear here so you
          can mark them done, open Focus Mode, or edit details through the unified modal without breaking the manuscript
          workflow above.
        </p>
        <div class="grid grid--two">
          <div class="stack">
            <div class="panel__subhead">
              <h3>Today</h3>
              <p class="muted">Current + upcoming tasks including routine steps.</p>
            </div>
            <div id="today-list" class="tasks muted">No tasks scheduled for today.</div>
          </div>
          <div class="stack">
            <div class="panel__subhead">
              <h3>Planner</h3>
              <p class="muted">Scheduled & unscheduled work with dependency cues.</p>
            </div>
            <div id="planner-list" class="tasks muted">Nothing planned yet.</div>
            <div id="planner-feedback" class="muted"></div>
          </div>
        </div>
      </section>

      <section class="panel">
        <div class="panel__header">
          <div class="stack">
            <p class="label">Achievements & rewards</p>
            <h2>Habit categories and ledger rollups</h2>
          </div>
          <button id="refresh-achievements" class="secondary">Refresh totals</button>
        </div>
        <div class="grid grid--two">
          <div class="stack">
            <div class="panel__subhead">
              <h3>Category achievements</h3>
              <p class="muted">Habit-derived categories roll into recent activity.</p>
            </div>
            <div id="achievement-list" class="tasks muted">No completions yet.</div>
          </div>
          <div class="stack">
            <div class="panel__subhead">
              <h3>Rewards ledger</h3>
              <p class="muted">Completed-today and bonus/spent totals mirror TaskStore data.</p>
            </div>
            <div id="reward-summary" class="tasks muted">No activity recorded.</div>
          </div>
        </div>
      </section>
    </main>

    <dialog id="task-editor" class="task-editor">
      <form id="task-editor-form" method="dialog" class="task-editor__content">
        <header class="task-editor__header">
          <div>
            <p class="label">Unified task editor</p>
            <h3 id="task-editor-title">Edit task</h3>
          </div>
          <button type="button" id="task-editor-close" class="secondary">Close</button>
        </header>
        <div class="grid grid--two">
          <label class="stack">
            <span class="label">Name</span>
            <input name="name" required />
          </label>
          <label class="stack">
            <span class="label">User</span>
            <input name="user" required />
          </label>
          <label class="stack">
            <span class="label">Duration (minutes)</span>
            <input name="durationMinutes" type="number" min="1" step="1" required />
          </label>
          <label class="stack">
            <span class="label">Importance</span>
            <input name="importance" type="number" min="0" max="5" step="1" />
          </label>
          <label class="stack">
            <span class="label">Urgency</span>
            <input name="urgency" type="number" min="0" max="5" step="1" />
          </label>
          <label class="stack">
            <span class="label">Deadline</span>
            <input name="deadline" type="date" />
          </label>
          <label class="stack">
            <span class="label">Dependency (task ID)</span>
            <input name="dependency" />
          </label>
          <label class="stack">
            <span class="label">Fix/Flex</span>
            <select name="fixFlex">
              <option value="FIX">FIX</option>
              <option value="FLEX">FLEX</option>
            </select>
          </label>
        </div>
        <footer class="task-editor__footer">
          <button type="submit">Save task</button>
        </footer>
      </form>
    </dialog>

    <script type="module" src="app.js"></script>
  </body>
</html>
